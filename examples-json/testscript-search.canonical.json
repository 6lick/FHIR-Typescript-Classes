{"description":"Test Script for testing search, read, and conditional create and delete","fixture":[{"id":"example-patient","resource":{"reference":"Patient/example"}}],"id":"search","metadata":{"capability":[{"conformance":{"reference":"Conformance/example"},"description":"Patient Create and Read Operations","link":["http://hl7.org/implement/standards/FHIR-Develop/http.html#create","http://hl7.org/implement/standards/FHIR-Develop/http.html#read"],"required":true},{"conformance":{"reference":"Conformance/example"},"description":"Patient Conditional Delete Operation","link":["http://hl7-fhir.github.io/http.html#2.1.0.12.1"],"required":true},{"conformance":{"reference":"Conformance/example"},"description":"Patient Conditional Create Operation","link":["http://hl7-fhir.github.io/http.html#2.1.0.13.1"],"required":true}]},"name":"Read, Search and Conditional Create and Delete","resourceType":"TestScript","setup":{"action":[{"operation":{"params":"given=John&family=Doe","resource":"Patient","type":{"code":"delete"}}}]},"status":"draft","test":[{"action":[{"operation":{"sourceId":"example-patient","type":{"code":"create"}}},{"assert":{"responseCode":"201"}},{"operation":{"contentType":"json","params":"?given=John&family=Doe","resource":"Patient","responseId":"R1","type":{"code":"search"}}},{"assert":{"headerField":"Location","operator":"notEmpty","warningOnly":true}},{"assert":{"operator":"equals","path":"fhir:Patient/fhir:birthDate/@value","sourceId":"R1","value":"1974-12-31"}},{"assert":{"navigationLinks":true,"warningOnly":true}},{"operation":{"accept":"json","responseId":"R2","type":{"code":"search"},"url":"${V1}"}},{"assert":{"contentType":"json"}},{"assert":{"response":"okay"}},{"operation":{"accept":"json","params":"?given=John&family=Doe&birthdate=1974-12-31","resource":"Patient","responseId":"R3","type":{"code":"search"}}},{"assert":{"contentType":"json"}},{"assert":{"response":"okay"}},{"assert":{"compareToSourceId":"R2","compareToSourcePath":"fhir:Patient/fhir:birthDate/@value","path":"fhir:Patient/fhir:birthDate/@value","sourceId":"R3"}},{"assert":{"path":"fhir:Patient/fhir:name/fhir:given/@value","sourceId":"R3","value":"John"}},{"operation":{"requestHeader":[{"field":"If-None-Exist","value":"Patient?given=John&Doe&birthdate=1974-12-31"}],"sourceId":"F1","type":{"code":"create"}}},{"assert":{"responseCode":"200"}},{"operation":{"params":"?given=John&family=Doe&birthdate=1974-12-31","resource":"Patient","type":{"code":"delete"}}},{"operation":{"params":"/${V2}","resource":"Patient","type":{"code":"read"}}},{"assert":{"responseCode":"410"}}],"description":"Create, read, search, conditional create, conditional delete.","id":"Test1","metadata":{"capability":[{"conformance":{"reference":"Conformance/example"},"description":"Patient Search Operation","link":["http://hl7.org/implement/standards/FHIR-Develop/http.html#search"],"validated":true}],"link":[{"description":"FHIR Patient","url":"http://hl7.org/implement/standards/FHIR-Develop/patient.html"}]},"name":"Create"}],"text":{"div":"<div><p><b>Generated Narrative with Details</b></p><p><b>id</b>: search</p><p><b>name</b>: Read, Search and Conditional Create and Delete</p><p><b>description</b>: Test Script for testing search, read, and conditional create and delete</p><h3>Fixtures</h3><table><tr><td>-</td><td><b>Resource</b></td></tr><tr><td>*</td><td><a>Patient/patient-example.xml</a></td></tr></table><blockquote><p><b>variable</b></p><p><b>name</b>: V1</p><p><b>sourceId</b>: R1</p><p><b>headerField</b>: Location</p></blockquote><blockquote><p><b>variable</b></p><p><b>name</b>: V2</p><p><b>sourceId</b>: R3</p><p><b>path</b>: fhir:Patient/fhir:name/fhir:given/@value</p></blockquote><blockquote><p><b>setup</b></p><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Params</b></td></tr><tr><td>*</td><td>delete</td><td>Patient</td><td>given=John&amp;family=Doe</td></tr></table></blockquote></blockquote><blockquote><p><b>test</b></p><p><b>name</b>: Create</p><p><b>description</b>: Create, read, search, conditional create, conditional delete.</p><blockquote><p><b>metadata</b></p><h3>Links</h3><table><tr><td>-</td><td><b>Url</b></td><td><b>Description</b></td></tr><tr><td>*</td><td><a>http://hl7.org/implement/standards/FHIR-Develop/patient.html</a></td><td>FHIR Patient</td></tr></table><blockquote><p><b>operation</b></p><p><b>type</b>: create</p><p><b>resource</b>: Patient</p><p><b>description</b>: Conditional Create Operation</p><p><b>link</b>: <a>http://hl7-fhir.github.io/http.html#2.1.0.13.1</a></p><p><b>required</b>: true</p><p><b>validated</b>: true</p></blockquote><blockquote><p><b>operation</b></p><p><b>type</b>: delete</p><p><b>resource</b>: Patient</p><p><b>description</b>: Conditional Delete Operation</p><p><b>link</b>: <a>http://hl7-fhir.github.io/http.html#2.1.0.12.1</a></p><p><b>required</b>: true</p><p><b>validated</b>: true</p></blockquote><blockquote><p><b>operation</b></p><p><b>type</b>: read</p><p><b>resource</b>: Patient</p><p><b>description</b>: Patient Read Operation</p><p><b>link</b>: <a>http://hl7.org/implement/standards/FHIR-Develop/http.html#read</a></p><p><b>validated</b>: true</p></blockquote><blockquote><p><b>operation</b></p><p><b>type</b>: search</p><p><b>resource</b>: Patient</p><p><b>description</b>: Patient Search Operation</p><p><b>link</b>: <a>http://hl7-fhir.github.io/http.html#2.1.0.14</a></p><p><b>validated</b>: true</p></blockquote></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table><tr><td>-</td></tr><tr><td>*</td></tr></table></blockquote></blockquote></div>","status":"generated"},"url":"http://hl7.org/fhir/TestScript/search","variable":[{"headerField":"Location","name":"V1","sourceId":"R1"},{"name":"V2","path":"fhir:Patient/fhir:name/fhir:given/@value","sourceId":"R3"}]}